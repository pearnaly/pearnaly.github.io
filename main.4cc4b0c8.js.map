{"version":3,"sources":["js/main.js"],"names":["isDrawing","lastPoint","container","document","getElementById","canvas","centoLink","rubImage","canvasWidth","width","canvasHeight","height","ctx","getContext","image","Image","brush","rubPixelsPdata","getMouse","e","offsetX","offsetY","undefined","offsetParent","offsetLeft","offsetTop","x","pageX","touches","clientX","y","pageY","clientY","handleMouseDown","handleMouseMove","preventDefault","currentPoint","point1","point2","filledInPixels","dist","Math","sqrt","pow","angle","angleBetween","atan2","i","sin","cos","globalCompositeOperation","drawImage","getFilledInPixels","stride","pdata","getImageData","data","l","length","opacity","maxOpacity","isWhite","pixelOpacity","console","log","round","parentNode","removeChild","setAttribute","setTimeout","style","handleMouseUp","onload","pixels","src","addEventListener"],"mappings":"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","file":"main.4cc4b0c8.js","sourceRoot":"..","sourcesContent":["(function() {\n\n  'use strict';\n\n  var isDrawing, lastPoint;\n  var container    = document.getElementById('js-container'),\n    canvas       = document.getElementById('js-canvas'),\n    centoLink       = document.getElementById('cento-link'),\n    rubImage       = document.getElementById('rubImage'),\n    canvasWidth  = canvas.width,\n    canvasHeight = canvas.height,\n    ctx          = canvas.getContext('2d'),\n    image        = new Image(),\n    brush        = new Image(),\n    rubPixelsPdata = [];\n\n  // image.crossOrigin =\"anonymous\"\n  image.onload = function() {\n    ctx.drawImage(image, 0, 0, canvasWidth, canvasHeight);\n    // Show the form when Image is loaded.\n    // document.querySelectorAll('.form')[0].style.visibility = 'visible';\n    var pixels   = ctx.getImageData(0, 0, canvasWidth, canvasHeight);\n    rubPixelsPdata    = pixels.data;\n    container.style = \"display: block;\";\n  };\n  // base64 Workaround because Same-Origin-Policy\n  image.src = rubImage.src;//;'EU27-2008_European_Union_map.svg';\n  brush.src = 'data:image/png;base64,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';\n\n  canvas.addEventListener('mousedown', handleMouseDown, false);\n  canvas.addEventListener('touchstart', handleMouseDown, false);\n  canvas.addEventListener('mousemove', handleMouseMove, false);\n  canvas.addEventListener('touchmove', handleMouseMove, false);\n  canvas.addEventListener('mouseup', handleMouseUp, false);\n  canvas.addEventListener('touchend', handleMouseUp, false);\n\n  function distanceBetween(point1, point2) {\n    return Math.sqrt(Math.pow(point2.x - point1.x, 2) + Math.pow(point2.y - point1.y, 2));\n  }\n\n  function angleBetween(point1, point2) {\n    return Math.atan2( point2.x - point1.x, point2.y - point1.y );\n  }\n\n  // Only test every `stride` pixel. `stride`x faster,\n  // but might lead to inaccuracy\n  function getFilledInPixels() {\n    var stride = 32;\n\n    var pixels   = ctx.getImageData(0, 0, canvasWidth, canvasHeight),\n      pdata    = pixels.data,\n      l        = pdata.length,\n      opacity  = 0,\n      maxOpacity = 0;\n\n    // Iterate over all pixels\n    for(var i = 0; i < l/4; i += stride) {\n      var isWhite = rubPixelsPdata[4*i] === 255 && rubPixelsPdata[4*i+1] === 255 && rubPixelsPdata[4*i+2] === 255;\n      var pixelOpacity = pdata[4*i+3];\n      if (!isWhite) {\n        opacity += pixelOpacity;\n        maxOpacity += 255;\n      }\n    }\n\n    return opacity / maxOpacity;\n  }\n\n  function getMouse(e, canvas) {\n    var offsetX = 0, offsetY = 0, mx, my;\n\n    if (canvas.offsetParent !== undefined) {\n      do {\n        offsetX += canvas.offsetLeft;\n        offsetY += canvas.offsetTop;\n      } while ((canvas = canvas.offsetParent));\n    }\n\n    mx = (e.pageX || e.touches[0].clientX) - offsetX;\n    my = (e.pageY || e.touches[0].clientY) - offsetY;\n\n    return {x: mx, y: my};\n  }\n\n  function handlePercentage(filledInPixels) {\n    filledInPixels = filledInPixels || 0;\n    console.log(Math.round(filledInPixels*100) + '%');\n    if (filledInPixels < 0.2) {\n      canvas.parentNode.removeChild(canvas);\n      centoLink.setAttribute('class', 'active-link');\n      setTimeout(() => {\n        document.getElementById('click-helper').style = \"display: unset;\";\n        }, 5000);\n    }\n  }\n\n  function handleMouseDown(e) {\n    isDrawing = true;\n    lastPoint = getMouse(e, canvas);\n  }\n\n  function handleMouseMove(e) {\n    if (!isDrawing) { return; }\n\n    e.preventDefault();\n\n    var currentPoint = getMouse(e, canvas),\n      dist = distanceBetween(lastPoint, currentPoint),\n      angle = angleBetween(lastPoint, currentPoint),\n      x, y;\n\n    for (var i = 0; i < dist; i++) {\n      x = lastPoint.x + (Math.sin(angle) * i) - 15;\n      y = lastPoint.y + (Math.cos(angle) * i) - 15;\n      ctx.globalCompositeOperation = 'destination-out';\n      ctx.drawImage(brush, x, y, 30, 30);\n    }\n\n    lastPoint = currentPoint;\n    handlePercentage(getFilledInPixels());\n  }\n\n  function handleMouseUp(e) {\n    isDrawing = false;\n  }\n\n})();\n"]}